{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhudev Kalakar</title>
    <!-- Performance Optimizations -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://images.unsplash.com">
    <link rel="preload" href="{% static 'css/new-styles.css' %}" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style">
    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/new-styles.css' %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
    .gallery-caption-team {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        background: linear-gradient(90deg, #e0e7ff 0%, #6a11cb 100%);
        color: #333;
        font-size: 1.05em;
        font-weight: 700;
        text-align: center;
        border-radius: 0 0 1rem 1rem;
        box-shadow: 0 2px 8px rgba(106,17,203,0.08);
        padding: 7px 0 5px 0;
        margin: 0;
        letter-spacing: 0.5px;
        word-break: break-word;
        text-shadow: 0 1px 4px rgba(106,17,203,0.10);
        border-bottom: 1.5px solid #6a11cb22;
    }
    @media (max-width: 640px) {
        .gallery-caption-team {
            font-size: 0.98em;
            padding: 5px 0 3px 0;
            border-radius: 0 0 0.7rem 0.7rem;
        }
    }
    @media (max-width: 480px) {
        .gallery-caption-team {
            font-size: 0.92em;
            padding: 4px 0 2px 0;
            border-radius: 0 0 0.5rem 0.5rem;
        }
    }
    .photo-caption-custom {
        display: block;
        width: 100%;
        background: linear-gradient(90deg, #f8b500 0%, #e75480 100%);
        color: #fff;
    font-size: 1.08em;
    font-weight: bold;
    text-align: center;
    border-radius: 0 0 1rem 1rem;
    box-shadow: 0 2px 8px rgba(232,84,128,0.10);
    padding: 8px 0 6px 0;
    margin: 0;
    letter-spacing: 0.7px;
    position: relative;
    z-index: 2;
    overflow: hidden;
    word-break: break-word;
    text-shadow: 0 2px 8px rgba(0,0,0,0.18), 0 1px 2px rgba(255,255,255,0.12);
    border-bottom: 2px solid #fff2;
    }
    @media (max-width: 640px) {
        .photo-caption-custom {
            font-size: 0.95em;
            padding: 5px 0 3px 0;
            border-radius: 0 0 0.7rem 0.7rem;
        }
    }
    @media (max-width: 480px) {
        .photo-caption-custom {
            font-size: 0.9em;
            padding: 4px 0 2px 0;
            border-radius: 0 0 0.5rem 0.5rem;
        }
    }
        /* Move repeated photo caption CSS to head for performance */
        .photo-caption-custom {
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 3em;
            margin-bottom: 0.5em;
            color: #4a5568;
            font-size: 1em;
            line-height: 1.2;
            background: rgba(102, 126, 234, 0.07);
            border-radius: 8px;
            padding: 8px 12px;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.08);
        }

        nav {
            background: rgba(17, 24, 39, 0.97);
            /* dark, semi-transparent */
            z-index: 100;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            border-bottom: 1px solid #222;
        }

        /* Ensure hero backgrounds are behind navbar */
        #hero-backgrounds img {
            z-index: -1;
        }

        @media (max-width: 639px) {
            .gallery-carousel {
                width: 100vw !important;
                margin-left: calc(-50vw + 50%);
            }

            .gallery-track {
                display: flex;
                width: 100vw !important;
            }

            .gallery-track .photo-card {
                width: 100vw !important;
                min-width: 100vw !important;
                max-width: 100vw !important;
                margin: 0 !important;
                flex: 0 0 100vw;
                box-sizing: border-box;
                background: #fff !important;
                border: 1px solid rgb(0, 0, 0) !important;
                height: 340px !important;
                /* Increased height for mobile view */
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18), 0 1.5px 6px rgba(0, 0, 0, 0.12) !important;
                /* Enhanced shadow */
            }

            .gallery-track .photo-card .photo-image {   
                height: 260px !important;
                /* Increased image height for mobile view */
            }
        }

        @media (min-width: 640px) {
            .gallery-carousel {
                width: 100% !important;
                margin-left: 0;
            }

            .gallery-track {
                width: auto !important;
                /* Fix: allow track to expand for all cards */
            }

            .gallery-track .photo-card {
                min-width: 300px !important;
                max-width: 300px !important;
                margin: 0 1rem !important;
                border: 2px solid red !important;
                height: 340px !important;
                box-shadow: 0 14px 26px rgba(0, 0, 0, 0.18), 0 1.5px 6px rgba(0, 0, 0, 0.12) !important;
                /* Enhanced shadow for web view */
            }

            .gallery-track .photo-card .photo-image {
                height: 260px !important;
            }
        }
    </style>
</head>

<body class="bg-black">
    <!-- Navbar -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-black backdrop-blur-2g">
    <div class="w-full px-4 sm:px-6 lg:px-8 relative">
            <!-- Solid Glossy Navbar with Enhanced Text Visibility -->
            <div class="absolute inset-0 pointer-events-none z-0">
                <div class="w-full h-full rounded-b-2xl bg-gray-900 border border-white/20 shadow-2xl"></div>
            </div>
            <div class="flex justify-between items-center h-16 relative z-10">
                <a href="{% url 'index' %}"
                    class="glossy-text text-white text-xl font-bold drop-shadow-lg bg-gradient-to-r from-orange-400 via-pink-400 to-red-500 bg-clip-text text-transparent"
                    style="text-shadow: 0 2px 8px rgba(255,255,255,0.25), 0 1px 2px rgba(255,100,100,0.15);">Bhudev
                    Kalakar</a>
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center desktop-menu">
                    <a href="{% url 'index' %}"
                        class="text-white font-semibold drop-shadow-lg hover:text-orange-400 transition-colors">Home</a>
                    <a href="{% url 'past-events' %}"
                        class="text-white font-semibold drop-shadow-lg hover:text-orange-400 transition-colors">Past
                        Events</a>
                    <a href="{% url 'photos' %}"
                        class="text-white font-semibold drop-shadow-lg hover:text-orange-400 transition-colors">Gallery</a>
                    <a href="{% url 'participant-profile' %}"
                        class="text-white font-semibold drop-shadow-lg hover:text-orange-400 transition-colors">Participants Profile</a>
                    <a href="{% url 'Infopage' %}"
                        class="text-white font-semibold drop-shadow-lg hover:text-orange-400 transition-colors">Info Page</a>
                    <a href="{% url 'contact' %}"
                        class="text-white font-semibold drop-shadow-lg hover:text-orange-400 transition-colors">Contact
                        Us</a>
                    <a href="{% url 'get-tickets' %}"
                        class="ml-4 px-4 py-2 rounded-md bg-gradient-to-r from-orange-500 to-red-600 text-white font-semibold shadow-lg hover:from-orange-600 hover:to-red-700 transition-all duration-300">Get
                        Tickets</a>
                </div>

                <!-- Mobile Menu Button -->
                <button class="mobile-menu-button md:hidden" aria-controls="mobile-menu" aria-expanded="false">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                    <span class="sr-only">Toggle navigation</span>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="mobile-menu" role="menu" aria-label="Mobile navigation">
                <button type="button" class="mobile-menu-close" aria-label="Close menu">&times;</button>
                <a href="{% url 'index' %}" role="menuitem" class="nav-link">Home</a>
                <a href="{% url 'past-events' %}" role="menuitem" class="nav-link">Past Events</a>
                <a href="{% url 'photos' %}" role="menuitem" class="nav-link">Gallery</a>
                <a href="{% url 'participant-profile' %}" role="menuitem" class="nav-link">Participants Profile</a>
                <a href="{% url 'Infopage' %}" role="menuitem" class="nav-link">Info Page</a>
                <a href="{% url 'contact' %}" role="menuitem" class="nav-link">Contact Us</a>
                <a href="{% url 'get-tickets' %}" role="menuitem" class="nav-link">Get Tickets</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="relative min-h-screen overflow-hidden pt-16 md:pt-20">
        <!-- Background Images -->
        <div id="hero-backgrounds">
            <img src="{% static 'img1.webp' %}" alt="Background 1"
                class="absolute inset-0 w-full h-full object-cover opacity-40" loading="lazy" style="z-index:-1;">
            <img src="{% static 'img2.webp' %}" alt="Background 2"
                class="absolute inset-0 w-full h-full object-cover opacity-40" loading="lazy"
                style="z-index:-1; display:none;">
            <img src="{% static 'img3.webp' %}" alt="Background 3"
                class="absolute inset-0 w-full h-full object-cover opacity-40" loading="lazy"
                style="z-index:-1; display:none;">
            <img src="{% static 'img4.webp' %}" alt="Background 4"
                class="absolute inset-0 w-full h-full object-cover opacity-40" loading="lazy"
                style="z-index:-1; display:none;">
        </div>

        <!-- Animated particles overlay -->
        <div class="absolute inset-0 overflow-hidden pointer-events-none" id="particles"></div>

        <!-- Main Content -->
        <div
            class="relative z-10 flex flex-col items-center justify-center min-h-screen px-4 sm:px-6 lg:px-8 text-center">
            <!-- Overlay for text visibility -->
            <div class="absolute inset-0 w-full h-full bg-black/60 rounded-xl z-0"></div>
            <div class="relative z-10 w-full flex flex-col items-center">
                <!-- Main Title -->
                <div class="mb-6 md:mb-8 animate-fade-in">
                    <h1
                        class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold text-white mb-4 drop-shadow-2xl leading-tight">
                        Bhudev Kalakaar 2025 
(Grand Finale) 
                    </h1>
                    <div
                        class="flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-3 text-base sm:text-lg md:text-xl lg:text-2xl text-white/90 mb-4 md:mb-6">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-calendar"></i>
                            <span>December 28, 2025</span>
                        </div>
                        <span class="hidden sm:inline">•</span>
                        <span>2 pm onwards, Amdavad</span>
                    </div>
                </div>

                <!-- Countdown Timer -->
                <div class="flex gap-3 mb-6 justify-center" id="hero-countdown">
                    <div class="countdown-card bg-black/60 rounded-xl shadow-lg px-6 py-4 flex flex-col items-center">
                        <i class="fas fa-calendar countdown-icon text-white text-2xl mb-2"></i>
                        <div class="countdown-value text-3xl font-bold text-white" data-countdown="days">00</div>
                        <div class="text-xs text-white/70 uppercase tracking-wide">Days</div>
                    </div>
                    <div class="countdown-card bg-black/60 rounded-xl shadow-lg px-6 py-4 flex flex-col items-center">
                        <i class="fas fa-clock countdown-icon text-white text-2xl mb-2"></i>
                        <div class="countdown-value text-3xl font-bold text-white" data-countdown="hours">00</div>
                        <div class="text-xs text-white/70 uppercase tracking-wide">Hours</div>
                    </div>
                    <div class="countdown-card bg-black/60 rounded-xl shadow-lg px-6 py-4 flex flex-col items-center">
                        <i class="fas fa-bolt countdown-icon text-white text-2xl mb-2"></i>
                        <div class="countdown-value text-3xl font-bold text-white" data-countdown="minutes">00</div>
                        <div class="text-xs text-white/70 uppercase tracking-wide">Minutes</div>
                    </div>
                    <div class="countdown-card bg-black/60 rounded-xl shadow-lg px-6 py-4 flex flex-col items-center">
                        <i class="fas fa-stopwatch countdown-icon text-white text-2xl mb-2"></i>
                        <div class="countdown-value text-3xl font-bold text-white" data-countdown="seconds">00</div>
                        <div class="text-xs text-white/70 uppercase tracking-wide">Seconds</div>
                    </div>
                </div>

                <!-- Get Tickets Button -->
                <a href="{% url 'get-tickets' %}"
                    class="bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white px-6 sm:px-8 py-3 sm:py-4 text-base sm:text-lg font-semibold transform hover:scale-105 transition-all duration-300 shadow-2xl rounded-md flex items-center justify-center">
                    <i class="fas fa-music mr-2"></i>
                    Get Tickets
                </a>
            </div>
        </div>

        <!-- Image Navigation Dots -->
        <div class="absolute bottom-16 sm:bottom-20 left-1/2 transform -translate-x-1/2 flex space-x-2 sm:space-x-3 z-20"
            id="image-dots"></div>

        <!-- Floating Stats -->
        <div class="absolute top-1/2 left-4 lg:left-8 transform -translate-y-1/2 hidden lg:block">
            <div class="bg-white/10 backdrop-blur-lg rounded-lg p-4 lg:p-6 text-white">
                <div class="text-2xl lg:text-3xl font-bold">50+</div>
                <div class="text-sm text-white/80">Past Events</div>
            </div>
        </div>

        <div class="absolute top-1/2 right-4 lg:right-8 transform -translate-y-1/2 hidden lg:block">
            <div class="bg-white/10 backdrop-blur-lg rounded-lg p-4 lg:p-6 text-white">
                <div class="text-2xl lg:text-3xl font-bold">10K+</div>
                <div class="text-sm text-white/80">Happy Participants</div>
            </div>
        </div>
    </div>

    <!-- Gallery Section - Clean Modern Design -->
        <!-- Modern Masonry Grid Gallery with Modal Popup -->
         <!-- Gallery Slider -->
            <section class="w-full py-16 bg-white">
                <div class="max-w-5xl mx-auto px-4">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 bg-clip-text text-transparent">Gallery</h2>
                        <p class="text-lg text-gray-600 max-w-xl mx-auto">Explore our collection of memorable moments</p>
                    </div>
                    <div id="gallery-container" class="gallery-carousel overflow-hidden relative">
                    {% if photos %}
                    <div class="relative">
                        <div id="gallerySliderTrack" class="flex transition-transform duration-500 ease-in-out" style="will-change: transform;">
                            {% for photo in photos %}
                            <div class="min-w-full sm:min-w-[50%] md:min-w-[33.333%] px-2 box-border">
                                <div class="rounded-xl overflow-hidden shadow-lg bg-white hover:shadow-2xl transition-shadow duration-300 cursor-pointer group" onclick="openGalleryModal('{{ photo.image.url }}', '{{ photo.caption|escapejs }}')">
                                    <img src="{{ photo.image.url }}" alt="{{ photo.caption }}" class="w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300" loading="lazy">
                                    {% if photo.caption %}
                                    <div class="p-3 bg-gradient-to-r from-purple-100 via-pink-100 to-blue-100 text-gray-800 text-center font-semibold text-base">{{ photo.caption }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <!-- Pagination Controls -->
                        {% if paginator.num_pages > 1 %}
                        <div class="flex justify-center mt-6">
                            <nav class="inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                {% if photos.has_previous %}
                                    <a href="?page={{ photos.previous_page_number }}" class="relative inline-flex items-center px-3 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">Previous</a>
                                {% else %}
                                    <span class="relative inline-flex items-center px-3 py-2 rounded-l-md border border-gray-200 bg-gray-100 text-sm font-medium text-gray-400 cursor-not-allowed">Previous</span>
                                {% endif %}
                                {% load pagination_extras %}
                                {% for i in paginator.num_pages|get_range %}
                                    {% if photos.number == i %}
                                        <span class="z-10 bg-indigo-600 border-indigo-600 text-white relative inline-flex items-center px-3 py-2 border text-sm font-medium">{{ i }}</span>
                                    {% else %}
                                        <a href="?page={{ i }}" class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-3 py-2 border text-sm font-medium">{{ i }}</a>
                                    {% endif %}
                                {% endfor %}
                                {% if photos.has_next %}
                                    <a href="?page={{ photos.next_page_number }}" class="relative inline-flex items-center px-3 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">Next</a>
                                {% else %}
                                    <span class="relative inline-flex items-center px-3 py-2 rounded-r-md border border-gray-200 bg-gray-100 text-sm font-medium text-gray-400 cursor-not-allowed">Next</span>
                                {% endif %}
                            </nav>
                        </div>
                        {% endif %}
                    </div>
                    {% else %}
                    <div class="w-full flex items-center justify-center py-20">
                        <div class="text-center">
                            <div class="w-24 h-24 mx-auto mb-6 rounded-full bg-gray-100 flex items-center justify-center">
                                <i class="fas fa-camera text-3xl text-gray-400"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">No Photos Yet</h3>
                            <p class="text-gray-600">Check back soon for amazing gallery content!</p>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </section>
        <style>
        #gallerySliderTrack {
            scroll-behavior: smooth;
        }
        @media (min-width: 640px) {
            #gallerySliderTrack > div { min-width: 50% !important; }
        }
        @media (min-width: 768px) {
            #gallerySliderTrack > div { min-width: 33.333% !important; }
        }
        </style>
        <script>
        // Gallery slider logic: infinite loop, auto-slide, modal popup
        document.addEventListener('DOMContentLoaded', function () {
            const track = document.getElementById('gallerySliderTrack');
            const prevBtn = document.getElementById('galleryPrevBtn');
            const nextBtn = document.getElementById('galleryNextBtn');
            if (!track) return;
            let slides = Array.from(track.children);
            const slideCount = slides.length;
            let current = 0;
            let autoSlideInterval = null;
            // Clone for infinite loop
            function cloneSlides() {
                if (slideCount < 2) return;
                slides.forEach(slide => track.appendChild(slide.cloneNode(true)));
                slides.forEach(slide => track.insertBefore(slide.cloneNode(true), track.firstChild));
            }
            cloneSlides();
            slides = Array.from(track.children);
            let visibleSlides = 1;
            function getVisibleSlides() {
                if (window.innerWidth >= 768) return 3;
                if (window.innerWidth >= 640) return 2;
                return 1;
            }
            function updateSlider(animate = true) {
                visibleSlides = getVisibleSlides();
                const slideWidth = track.offsetWidth / visibleSlides;
                const offset = (current + slideCount) * slideWidth;
                track.style.transition = animate ? 'transform 0.5s' : 'none';
                track.style.transform = `translateX(-${offset}px)`;
            }
            function nextSlide() {
                current++;
                updateSlider();
                if (current >= slideCount) {
                    setTimeout(() => {
                        current = 0;
                        updateSlider(false);
                    }, 500);
                }
            }
            function prevSlide() {
                current--;
                updateSlider();
                if (current < 0) {
                    setTimeout(() => {
                        current = slideCount - 1;
                        updateSlider(false);
                    }, 500);
                }
            }
            function startAutoSlide() {
                if (autoSlideInterval) clearInterval(autoSlideInterval);
                autoSlideInterval = setInterval(nextSlide, 3500);
            }
            function stopAutoSlide() {
                if (autoSlideInterval) clearInterval(autoSlideInterval);
            }
            nextBtn && nextBtn.addEventListener('click', () => { stopAutoSlide(); nextSlide(); startAutoSlide(); });
            prevBtn && prevBtn.addEventListener('click', () => { stopAutoSlide(); prevSlide(); startAutoSlide(); });
            window.addEventListener('resize', () => updateSlider(false));
            updateSlider(false);
            startAutoSlide();
        });
        </script>
        </section>
    <!-- Other Places Events Countdown Section -->
    <section class="w-full py-16" style="background: #8a8686; border-bottom: 1px solid #8a8686;">
        <div class="mx-auto px-8" style="max-width:1800px;">
            <h2 class="text-4xl font-extrabold text-center mb-10" style="color:#f8b500; letter-spacing:1px;">Different
                Places Events</h2>
            <div class="relative" style="overflow: hidden;">
                <div id="otherEventsSliderContainer" style="width:100%; overflow:hidden;">
                    <button id="otherEventsPrev" aria-label="Previous"
                        style="position:absolute; left:0; top:50%; transform:translateY(-50%); z-index:10; background:rgba(0,0,0,0.3); border:none; border-radius:50%; width:40px; height:40px; display:flex; align-items:center; justify-content:center; color:#fff; font-size:2rem; cursor:pointer;">
                        &#8592;
                    </button>
                    <button id="otherEventsNext" aria-label="Next"
                        style="position:absolute; right:0; top:50%; transform:translateY(-50%); z-index:10; background:rgba(0,0,0,0.3); border:none; border-radius:50%; width:40px; height:40px; display:flex; align-items:center; justify-content:center; color:#fff; font-size:2rem; cursor:pointer;">
                        &#8594;
                    </button>
                    <div id="otherEventsSlider" class="flex transition-transform duration-500"
                        style="will-change:transform;">
                        {% for event in other_events %}
                        <div class="min-w-[90vw] sm:min-w-[320px] sm:max-w-xs mx-4 sm:mx-2 bg-gray-100 rounded-2xl shadow-2xl border border-gray-200 flex flex-col items-center p-8 transition-transform hover:scale-105">
                            {% if event.image %}
                                <img src="{{ event.image.url }}" alt="{{ event.title|default:'Event' }}" class="w-full h-40 object-cover rounded-xl mb-5 shadow-md" loading="lazy">
                            {% endif %}
                            <h3 class="text-2xl font-bold mb-2 text-gray-900 text-center">{{ event.title|default:'No Title' }}</h3>
                            <div class="text-base text-gray-700 mb-1 text-center">{{ event.location|default:'No Location' }}</div>
                            <div class="text-sm text-gray-500 mb-2 text-center">
                                {% if event.event_datetime %}
                                    {{ event.event_datetime|date:'M d, Y H:i' }}
                                {% else %}
                                    Date not set
                                {% endif %}
                            </div>
                            <div class="mb-4 text-gray-800 text-center">{{ event.description|default:'No Description' }}</div>
                            <div style="width:100%; display:flex; justify-content:center; margin-bottom:0.5rem;">
                                {% if event.ticket_available %}
                                    <a href="{% url 'get-tickets' %}"
                                        class="inline-block px-4 py-2 rounded-lg bg-gradient-to-r from-orange-400 via-pink-400 to-red-500 text-black font-semibold shadow hover:from-orange-500 hover:to-red-600 transition-all duration-300"
                                        style="font-size:1rem; text-align:center;">Get Ticket</a>
                                {% else %}
                                    <button class="inline-block px-4 py-2 rounded-lg bg-gray-300 text-gray-600 font-semibold shadow cursor-not-allowed" style="font-size:1rem; text-align:center;" disabled>Coming Soon</button>
                                {% endif %}
                            </div>
                            {% if event.event_datetime %}
                            <div class="countdown text-lg font-bold text-red-600 text-center"
                                data-date="{{ event.event_datetime|date:'Y-m-d\TH:i:s' }}">
                                <div class="flex justify-center gap-2 mt-2">
                                    <div class="countdown-box">
                                        <span class="days countdown-num">00</span>
                                        <div class="countdown-label">Days</div>
                                    </div>
                                    <div class="countdown-box">
                                        <span class="hours countdown-num">00</span>
                                        <div class="countdown-label">Hours</div>
                                    </div>
                                    <div class="countdown-box">
                                        <span class="minutes countdown-num">00</span>
                                        <div class="countdown-label">Minutes</div>
                                    </div>
                                    <div class="countdown-box">
                                        <span class="seconds countdown-num">00</span>
                                        <div class="countdown-label">Seconds</div>
                                    </div>
                                </div>
                                <style>
                                    .countdown-box {
                                        background: linear-gradient(135deg, #ffe3ec 0%, #ffe3ec 100%);
                                        border-radius: 0.75rem;
                                        box-shadow: 0 2px 8px #f8b50033;
                                        padding: 0.25rem 0.5rem;
                                        display: flex;
                                        flex-direction: column;
                                        align-items: center;
                                        min-width: 40px;
                                    }
                                    .countdown-num {
                                        font-size: 1.1rem;
                                        font-weight: bold;
                                        color: #080808;
                                        margin-bottom: 0.1rem;
                                    }
                                    .countdown-label {
                                        font-size: 0.7rem;
                                        color: #e75480;
                                        font-weight: 500;
                                        letter-spacing: 0.5px;
                                    }
                                </style>
                            </div>
                            {% endif %}
                        </div>
                        {% empty %}
                        <p class="text-center w-full text-gray-700">No upcoming events from other places.</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <script>
            // Hero Section Countdown (fixed date)
            (function() {
                const heroTarget = new Date('2025-12-28T14:00:00');
                function updateHeroCountdown() {
                    let now = new Date();
                    let diff = heroTarget - now;
                    if (diff < 0) diff = 0;
                    let days = Math.floor(diff / (1000 * 60 * 60 * 24)) + 1; // Include today
                    let hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                    let minutes = Math.floor((diff / (1000 * 60)) % 60);
                    let seconds = Math.floor((diff / 1000) % 60);
                    document.querySelector('[data-countdown="days"]').textContent = String(days).padStart(2, '0');
                    document.querySelector('[data-countdown="hours"]').textContent = String(hours).padStart(2, '0');
                    document.querySelector('[data-countdown="minutes"]').textContent = String(minutes).padStart(2, '0');
                    document.querySelector('[data-countdown="seconds"]').textContent = String(seconds).padStart(2, '0');
                }
                updateHeroCountdown();
                setInterval(updateHeroCountdown, 1000);
            })();
            // Other event cards countdown
            document.querySelectorAll('.countdown').forEach(function (card) {
                if (card.id === 'countdown') return; // skip main
                var dateStr = card.getAttribute('data-date');
                var targetDate = new Date(dateStr);
                function updateCountdown() {
                    var now = new Date();
                    var diff = targetDate - now;
                    if (diff < 0) diff = 0;
                    var days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    var hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                    var minutes = Math.floor((diff / (1000 * 60)) % 60);
                    var seconds = Math.floor((diff / 1000) % 60);
                    card.querySelector('.days').textContent = String(days).padStart(2, '0');
                    card.querySelector('.hours').textContent = String(hours).padStart(2, '0');
                    card.querySelector('.minutes').textContent = String(minutes).padStart(2, '0');
                    card.querySelector('.seconds').textContent = String(seconds).padStart(2, '0');
                }
                updateCountdown();
                setInterval(updateCountdown, 1000);
            });

            // Slider for Other Places Events
            const otherEventsSlider = document.getElementById('otherEventsSlider');
            const otherEventsCards = otherEventsSlider ? otherEventsSlider.children : [];
            let otherEventsIndex = 0;
            function getOtherEventsCardWidth() {
                if (window.innerWidth < 640) {
                    return otherEventsCards[0]?.offsetWidth || window.innerWidth * 0.9;
                } else {
                    return otherEventsCards[0]?.offsetWidth || 320;
                }
            }
            let otherEventsCardWidth = getOtherEventsCardWidth();
            // Clone all cards for seamless loop
            if (otherEventsCards.length > 1) {
                Array.from(otherEventsCards).forEach(card => {
                    const clone = card.cloneNode(true);
                    otherEventsSlider.appendChild(clone);
                });
            }
            function showOtherEventsCards(animate = true) {
                otherEventsCardWidth = getOtherEventsCardWidth();
                otherEventsSlider.style.transition = animate ? 'transform 0.5s' : 'none';
                otherEventsSlider.style.transform = `translateX(-${otherEventsIndex * (otherEventsCardWidth + 32)}px)`;
            }
            function nextOtherEventsCard() {
                otherEventsIndex++;
                showOtherEventsCards();
                // If at the end, reset instantly to first card (no animation)
                if (otherEventsIndex === otherEventsCards.length / 2) {
                    setTimeout(() => {
                        otherEventsIndex = 0;
                        showOtherEventsCards(false);
                    }, 500);
                }
            }
            let otherEventsSliderInterval = null;
            function startOtherEventsAutoSlide() {
                if (!otherEventsSliderInterval) {
                    otherEventsSliderInterval = setInterval(nextOtherEventsCard, 3000);
                }
            }
            function stopOtherEventsAutoSlide() {
                if (otherEventsSliderInterval) {
                    clearInterval(otherEventsSliderInterval);
                    otherEventsSliderInterval = null;
                }
            }
            if (otherEventsCards.length > 1) {
                startOtherEventsAutoSlide();
                document.getElementById('otherEventsPrev').addEventListener('click', function () {
                    stopOtherEventsAutoSlide();
                    otherEventsIndex--;
                    if (otherEventsIndex < 0) {
                        otherEventsIndex = otherEventsCards.length / 2 - 1;
                    }
                    showOtherEventsCards();
                });
                document.getElementById('otherEventsNext').addEventListener('click', function () {
                    stopOtherEventsAutoSlide();
                    nextOtherEventsCard();
                });
            }
            showOtherEventsCards();
        </script>
    </section>
    <script>
        // Gallery slider logic with true infinite loop and auto-slide for web/mobile view
        document.addEventListener('DOMContentLoaded', function () {
            const galleryTrack = document.querySelector('.gallery-track');
            let galleryIndex = 0;
            let galleryCardWidth = 0;
            let visibleCards = 4;
            let originalCards = [];
            let galleryCards = [];
            let gallerySliderInterval = null;

            // Event delegation for modal opening - works with cloned elements
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('photo-image') && e.target.classList.contains('gallery-clickable')) {
                    const imgSrc = e.target.getAttribute('data-src') || e.target.src;
                    const caption = e.target.getAttribute('data-caption') || e.target.alt;
                    openGalleryModal(imgSrc, caption);
                }
            });

            function getOriginalCards() {
                return Array.from(galleryTrack.querySelectorAll('.photo-card'));
            }
            function getGalleryCardWidth() {
                if (window.innerWidth < 640) {
                    visibleCards = 1;
                    return originalCards[0]?.offsetWidth || window.innerWidth;
                } else {
                    visibleCards = 4;
                    return originalCards[0]?.offsetWidth || 316;
                }
            }
            function showGalleryCard(animate = true) {
                galleryCardWidth = getGalleryCardWidth();
                const totalWidth = galleryCards.length * galleryCardWidth;
                galleryTrack.style.width = totalWidth + 'px';
                galleryTrack.style.transition = animate ? 'transform 0.5s' : 'none';
                galleryTrack.style.transform = `translateX(-${galleryIndex * galleryCardWidth}px)`;

                // Ensure the last image is fully visible
                if (galleryIndex >= galleryCards.length - visibleCards) {
                    galleryTrack.style.transition = 'none';
                    galleryIndex = originalCards.length;
                    galleryTrack.style.transform = `translateX(-${galleryIndex * galleryCardWidth}px)`;
                }
            }

            function setupGalleryLoop() {
                originalCards = getOriginalCards();
                if (originalCards.length === 0) return;
                galleryTrack.innerHTML = '';
                let clonesBefore = originalCards.map(card => card.cloneNode(true));
                let clonesAfter = originalCards.map(card => card.cloneNode(true));
                clonesBefore.forEach(clone => galleryTrack.appendChild(clone));
                originalCards.forEach(card => galleryTrack.appendChild(card));
                clonesAfter.forEach(clone => galleryTrack.appendChild(clone));
                galleryCards = Array.from(galleryTrack.children);
                galleryIndex = originalCards.length;
                showGalleryCard(false);
            }

            function startGallerySlider() {
                stopGallerySlider();
                if (galleryCards.length > visibleCards * 2) {
                    gallerySliderInterval = setInterval(nextGalleryCard, 4000);
                }
            }

            function stopGallerySlider() {
                if (gallerySliderInterval) {
                    clearInterval(gallerySliderInterval);
                    gallerySliderInterval = null;
                }
            }
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    setupGalleryLoop();
                    startGallerySlider();
                }, 300); // Debounce resize for performance
            });
            setupGalleryLoop();
            startGallerySlider();
        });
    </script>

    <!-- Footer -->
    <footer class="bg-gradient-to-t from-black/90 to-black/70 backdrop-blur-lg text-white border-t border-white/10">
        <div class="mx-auto px-8 py-12" style="max-width:2000px;">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- About Section -->
                <div class="col-span-1 md:col-span-2">
                    <h3 class="text-2xl font-bold mb-4 text-white">Bhudev Kalakar</h3>
                    <p class="text-white/80 mb-4 leading-relaxed">
                        Celebrating the rich cultural heritage and artistic excellence of our community.
                        Join us in promoting local talent and preserving traditional arts through
                        spectacular events and performances.
                    </p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-white/60 hover:text-white transition-colors duration-300">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="text-white/60 hover:text-white transition-colors duration-300">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-white/60 hover:text-white transition-colors duration-300">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-white/60 hover:text-white transition-colors duration-300">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div>
                    <h4 class="text-lg font-semibold mb-4 text-white">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="{% url 'index' %}"
                                class="text-white/60 hover:text-white transition-colors duration-300">Home</a></li>
                        <li><a href="{% url 'past-events' %}"
                                class="text-white/60 hover:text-white transition-colors duration-300">Past Events</a>
                        </li>
                        <li><a href="{% url 'photos' %}"
                                class="text-white/60 hover:text-white transition-colors duration-300">Gallery</a></li>
                        <li><a href="{% url 'contact' %}"
                                class="text-white/60 hover:text-white transition-colors duration-300">Contact Us</a>
                        </li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div>
                    <h4 class="text-lg font-semibold mb-4 text-white">Contact Info</h4>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-envelope text-white/60"></i>
                            <span class="text-white/80">bhudevnetwork@gmail.com</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-phone text-white/60"></i>
                            <span class="text-white/80">+91 9662766565</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-map-marker-alt text-white/60"></i>
                            <span class="text-white/80">601, 602, 603, 604 A, 6th Floor<br>Galav Chambers, Dairy Den Circle, Sayajiganj
                                Vadodara - 390020</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Section -->
            <div class="border-t border-white/10 pt-8 mt-8">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <p class="text-white/60 text-sm   ">
                        © <span id="current-year"></span> Bhudev Kalakar. All rights reserved.
                    </p>
                    <div class="flex items-center space-x-1 text-white/60 text-sm mt-4 md:mt-0">
                        <span>Made with</span>
                        <i class="fas fa-heart text-red-400"></i>
                        <span>for cultural preservation</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Enhanced Gallery Modal Popup -->
    <div id="galleryModal" class="gallery-modal-overlay" style="display:none;">
        <!-- Close button -->
        <button class="gallery-modal-close" onclick="closeGalleryModal()" aria-label="Close modal">
            <i class="fas fa-times"></i>
        </button>
        
        <!-- Modal content -->
        <div class="gallery-modal-content">
            <img id="galleryModalImg" src="" alt="" class="gallery-modal-image">
            <div id="galleryModalCaption" class="gallery-modal-caption"></div>
        </div>
    </div>

    <style>
        .gallery-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease-out;
        }

        .gallery-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            z-index: 10001;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .gallery-modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }

        .gallery-modal-content {
            max-width: 90vw;
            max-height: 90vh;
            position: relative;
            animation: slideIn 0.4s ease-out;
        }

        .gallery-modal-image {
            max-width: 100%;
            max-height: 80vh;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            display: block;
            margin: 0 auto;
        }

        .gallery-modal-caption {
            color: white;
            text-align: center;
            font-size: 18px;
            font-weight: 500;
            margin-top: 20px;
            padding: 0 20px;
            line-height: 1.4;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            padding: 12px 20px;
            backdrop-filter: blur(10px);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: scale(0.8) translateY(30px);
            }
            to { 
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .gallery-modal-close {
                top: 15px;
                right: 15px;
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .gallery-modal-image {
                max-height: 70vh;
                border-radius: 8px;
            }

            .gallery-modal-caption {
                font-size: 16px;
                margin-top: 15px;
                padding: 10px 15px;
            }
        }
    </style>

    <script>
        function openGalleryModal(imgUrl, caption) {
            const modal = document.getElementById('galleryModal');
            const modalImg = document.getElementById('galleryModalImg');
            const modalCaption = document.getElementById('galleryModalCaption');
            
            modalImg.src = imgUrl;
            modalCaption.textContent = caption || '';
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // Add smooth entrance animation
            setTimeout(() => {
                modal.style.opacity = '1';
            }, 10);
        }
        
        function closeGalleryModal() {
            const modal = document.getElementById('galleryModal');
            const modalImg = document.getElementById('galleryModalImg');
            const modalCaption = document.getElementById('galleryModalCaption');
            
            modal.style.display = 'none';
            modalImg.src = '';
            modalCaption.textContent = '';
            document.body.style.overflow = '';
        }
        
        // Close modal on background click
        document.getElementById('galleryModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeGalleryModal();
            }
        });
        
        // Close modal on ESC key
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') {
                closeGalleryModal();
            }
        });
    </script>
    <script src="{% static 'js/main.js' %}"></script>
    <script>
        // Background slideshow for hero section
        const bgImages = document.querySelectorAll('#hero-backgrounds img');
        let currentBg = 0;
        setInterval(() => {
            bgImages.forEach((img, i) => {
                img.style.display = (i === currentBg) ? 'block' : 'none';
            });
            currentBg = (currentBg + 1) % bgImages.length;
        }, 4000); // Change every 4 seconds
        // Show first image on load
        bgImages.forEach((img, i) => {
            img.style.display = (i === 0) ? 'block' : 'none';
        });
    </script>
</body>

</html>